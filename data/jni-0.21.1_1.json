{
    "level": "Warning",
    "analyzer": "UnsafeDestructor",
    "op_type": null,
    "description": "unsafe block detected in drop",
    "file": "jni-0.21.1/src/wrapper/objects/global_ref.rs",
    "start_line": 91,
    "start_col": 1,
    "end_line": 91,
    "end_col": 29,
    "code_snippet": "impl Drop for GlobalRefGuard {\n    fn drop(&mut self) {\n        let raw: sys::jobject = mem::take(&mut self.obj).into_raw();\n\n        let drop_impl = |env: &JNIEnv| -> Result<()> {\n            let internal = env.get_native_interface();\n            // This method is safe to call in case of pending exceptions (see chapter 2 of the spec)\n            jni_unchecked!(internal, DeleteGlobalRef, raw);\n            Ok(())\n        };\n\n        let res = match self.vm.get_env() {\n            Ok(env) => drop_impl(&env),\n            Err(_) => {\n                warn!(\"Dropping a GlobalRef in a detached thread. Fix your code if this message appears frequently (see the GlobalRef docs).\");\n                self.vm\n                    .attach_current_thread()\n                    .and_then(|env| drop_impl(&env))\n            }\n        };\n\n        if let Err(err) = res {\n            debug!(\"error dropping global ref: {:#?}\", err);\n        }\n    }\n}"
}
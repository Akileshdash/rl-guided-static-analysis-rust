{
    "level": "Warning",
    "analyzer": "UnsafeDataflow",
    "op_type": "ReadFlow/WriteFlow",
    "description": "Potential unsafe dataflow issue in `fold::in_place::fallible_map_vec`",
    "file": "chalk-ir-0.103.0/src/fold/in_place.rs",
    "start_line": 44,
    "start_col": 1,
    "end_line": 71,
    "end_col": 2,
    "code_snippet": "pub(super) fn fallible_map_vec<T, U, E>(\n    vec: Vec<T>,\n    mut map: impl FnMut(T) -> Result<U, E>,\n) -> Result<Vec<U>, E> {\n    // This optimization is only valid when `T` and `U` have the same size/alignment and is not\n    // useful for ZSTs.\n    if !is_layout_identical::<T, U>() || is_zst::<T>() {\n        return vec.into_iter().map(map).collect();\n    }\n\n    let mut vec = VecMappedInPlace::<T, U>::new(vec);\n\n    unsafe {\n        for i in 0..vec.len {\n            let place = vec.ptr.add(i);\n            let val = ptr::read(place);\n\n            // Set `map_in_progress` so the drop impl for `VecMappedInPlace` can handle the other\n            // elements correctly in case `map` panics or returns an error.\n            vec.map_in_progress = i;\n            let mapped_val = map(val)?;\n\n            ptr::write(place as *mut U, mapped_val);\n        }\n\n        Ok(vec.finish())\n    }\n}"
}